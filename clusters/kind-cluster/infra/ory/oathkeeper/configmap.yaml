apiVersion: v1
kind: ConfigMap
metadata:
  name: oathkeeper-values
  namespace: dscp
data:
  values.yaml: |
    configmap:
      hashSumEnabled: true
    service:
      proxy:
        enabled: false
    oathkeeper:
      managedAccessRules: false
      config:
        log:
          level: debug
          format: json
        serve:
          api:
            port: 4456
          prometheus:
            port: 9000
        errors:
          fallback:
            - json
          handlers:
            json:
              enabled: true
              config:
                verbose: true
        mutators:
          noop:
            enabled: true
        authorizers:
          allow:
            enabled: true
        authenticators:
          oauth2_introspection:
            enabled: true
            config:
              introspection_url: http://hydra-admin:4445/oauth2/introspect
              scope_strategy: wildcard
          
    ingress:
      proxy:
        enabled: false
      api:
        enabled: false
    maester:
      enabled: true
  rules.json: "[{\"id\":\"some-id\",\"match\":{\"url\":\"blah.com\",\"methods\":[\"GET\",\"POST\"]},\"authenticators\":[{\"handler\":\"oauth2_introspection\",\"config\":{}}],\"authorizer\":{\"handler\":\"allow\"},\"mutators\":[{\"handler\":\"noop\"}]}]"
